{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\pjy41\\\\OneDrive\\\\\\uBC14\\uD0D5 \\uD654\\uBA74\\\\Park\\\\Fall 2021\\\\kprogrammer\\\\Kprogrammers\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"C:\\\\Users\\\\pjy41\\\\OneDrive\\\\\\uBC14\\uD0D5 \\uD654\\uBA74\\\\Park\\\\Fall 2021\\\\kprogrammer\\\\Kprogrammers\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"C:\\\\Users\\\\pjy41\\\\OneDrive\\\\\\uBC14\\uD0D5 \\uD654\\uBA74\\\\Park\\\\Fall 2021\\\\kprogrammer\\\\Kprogrammers\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\pjy41\\\\OneDrive\\\\\\uBC14\\uD0D5 \\uD654\\uBA74\\\\Park\\\\Fall 2021\\\\kprogrammer\\\\Kprogrammers\\\\client\\\\src\\\\components\\\\pages\\\\SignUpForm.js\";\n\nimport styled from \"styled-components\";\nimport bgImg from '../../Images/bg.png';\nimport React, { useState, useEffect } from 'react';\nimport validation from \"./validation\";\nimport Form from './Form';\nimport '../../App.css';\nimport submitForm from './Form';\nimport axios from 'axios';\nimport { useHistory } from \"react-router-dom\";\nvar initialState = {\n  firstname: '',\n  lastname: '',\n  email: '',\n  password: '',\n  major: \"\"\n};\n\nvar SignUpForm = function SignUpForm(_ref) {\n  var submitForm = _ref.submitForm;\n\n  var _useState = useState(initialState),\n      _useState2 = _slicedToArray(_useState, 2),\n      formData = _useState2[0],\n      setFormData = _useState2[1];\n\n  var history = useHistory();\n\n  var _useState3 = useState({\n    lastname: \"\",\n    firstname: \"\",\n    email: \"\",\n    password: \"\",\n    major: \"\"\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      values = _useState4[0],\n      setValues = _useState4[1];\n\n  var _useState5 = useState({}),\n      _useState6 = _slicedToArray(_useState5, 2),\n      errors = _useState6[0],\n      setErrors = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      dataIsCorrect = _useState8[0],\n      setDataIsCorrect = _useState8[1]; // const handleChange = (event) =>{\n  //     setValues({\n  //         ...values,            \n  //         [event.target.name]: event.target.value            \n  //     })                \n  //     console.log({values})\n  // };\n\n\n  var handleChange = function handleChange(event) {\n    var _event$target = event.target,\n        name = _event$target.name,\n        value = _event$target.value;\n    setValues(_objectSpread({}, values, _defineProperty({}, name, value)));\n    console.log({\n      values: values\n    });\n  };\n\n  var submit = function submit(event) {\n    event.preventDefault();\n    var payload = {\n      lastname: values.lastname,\n      firstname: values.firstname,\n      email: values.email,\n      password: values.password,\n      major: values.major\n    };\n    axios({\n      url: '/api/save',\n      method: 'POST',\n      data: payload\n    }).then(function () {\n      console.log('Data has been sent to the server');\n    }).catch(function () {\n      console.log('Internal server error');\n    });\n    ;\n  };\n\n  var handleFormSubmit = function handleFormSubmit(event) {\n    event.preventDefault();\n    setErrors(validation(values));\n    setDataIsCorrect(true);\n    var lastname = values.lastname,\n        firstname = values.firstname,\n        email = values.email,\n        password = values.password,\n        major = values.major;\n\n    if (lastname && firstname && email && password && major) {\n      //alert(\"registered successfully\")\n      axios.post(\"/api/save\", values).then(function (res) {\n        console.log(res.data);\n        alert(res.data.msg);\n\n        if (res.data.msg !== \"User already registered\") {\n          history.push('/sign-up');\n        }\n      });\n    } else {\n      alert(\"invalid input\");\n    }\n  };\n\n  useEffect(function () {\n    if (Object.keys(errors).length === 0 && dataIsCorrect) {// submitForm(true);\n    }\n  }, [errors]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sign_up_container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sign_up-wrapper\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"sign-up_title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }\n  }, \"Welcome to KSEA Chapter!\"), /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"sign-up_title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }\n  }, \"Create your new account\")), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"form-wrapper\",\n    onSubmit: submit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sign-up_name\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"sign_up_label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 21\n    }\n  }, \"Last Name\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"sign_up_input\",\n    type: \"text\",\n    name: \"lastname\",\n    value: values.lastname,\n    onChange: handleChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 21\n    }\n  }), errors.lastname && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"error\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 41\n    }\n  }, errors.lastname)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sign-up_name\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"sign_up_label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 21\n    }\n  }, \"First Name\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"sign_up_input\",\n    type: \"text\",\n    name: \"firstname\",\n    value: values.firstname,\n    onChange: handleChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 21\n    }\n  }), errors.firstname && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"error\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 42\n    }\n  }, errors.firstname)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sign-up_email\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"sign_up_label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 21\n    }\n  }, \"Email\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"sign_up_input\",\n    type: \"email\",\n    name: \"email\",\n    value: values.email,\n    onChange: handleChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 21\n    }\n  }), errors.email && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"error\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 38\n    }\n  }, errors.email)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sign-up_email\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"sign_up_label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 21\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"sign_up_input\",\n    type: \"password\",\n    name: \"password\",\n    value: values.password,\n    onChange: handleChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 21\n    }\n  }), errors.password && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"error\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 41\n    }\n  }, errors.password)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sign-up_name\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"sign_up_label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 21\n    }\n  }, \"Major\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"sign_up_input\",\n    type: \"text\",\n    name: \"major\",\n    value: values.major,\n    onChange: handleChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 21\n    }\n  }), errors.major && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"error\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 38\n    }\n  }, errors.major)), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"submit\",\n    onClick: handleFormSubmit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 21\n    }\n  }, \"Sign up\")))));\n};\n\nexport default SignUpForm;","map":{"version":3,"sources":["C:/Users/pjy41/OneDrive/바탕 화면/Park/Fall 2021/kprogrammer/Kprogrammers/client/src/components/pages/SignUpForm.js"],"names":["styled","bgImg","React","useState","useEffect","validation","Form","submitForm","axios","useHistory","initialState","firstname","lastname","email","password","major","SignUpForm","formData","setFormData","history","values","setValues","errors","setErrors","dataIsCorrect","setDataIsCorrect","handleChange","event","target","name","value","console","log","submit","preventDefault","payload","url","method","data","then","catch","handleFormSubmit","post","res","alert","msg","push","Object","keys","length"],"mappings":"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","sourcesContent":["import styled from \"styled-components\";\r\nimport bgImg from '../../Images/bg.png';\r\nimport React, {useState, useEffect} from 'react';\r\nimport validation from \"./validation\";\r\nimport Form from './Form';\r\nimport '../../App.css';\r\nimport submitForm from './Form';\r\nimport axios from 'axios';\r\nimport {useHistory} from \"react-router-dom\"\r\n\r\nconst initialState = {firstname:'', lastname: '', email: '', password: '', major: \"\"};\r\n\r\nconst SignUpForm = ({ submitForm }) => {\r\n\r\n    const [formData, setFormData] = useState(initialState);\r\n    const history = useHistory()\r\n    const [values, setValues] = useState({\r\n        lastname: \"\",\r\n        firstname: \"\",\r\n        email: \"\",\r\n        password: \"\",\r\n        major: \"\",\r\n    });\r\n\r\n    const [errors, setErrors] = useState({\r\n\r\n    });\r\n\r\n    const [dataIsCorrect, setDataIsCorrect] = useState(false);\r\n\r\n    // const handleChange = (event) =>{\r\n    //     setValues({\r\n    //         ...values,            \r\n    //         [event.target.name]: event.target.value            \r\n    //     })                \r\n    //     console.log({values})\r\n    // };\r\n    const handleChange = (event) =>{\r\n        const {name, value} = event.target\r\n        setValues({\r\n            ...values,            \r\n            [name]: value            \r\n        })                \r\n        console.log({values})\r\n    };\r\n    const submit = (event) => {\r\n        event.preventDefault();\r\n        const payload = {            \r\n            lastname: values.lastname,\r\n            firstname: values.firstname,\r\n            email: values.email,\r\n            password: values.password,\r\n            major: values.major\r\n        };\r\n\r\n        axios({\r\n            url: '/api/save',\r\n            method: 'POST',\r\n            data: payload\r\n        })\r\n            .then(() => {\r\n                console.log('Data has been sent to the server');\r\n            })\r\n            .catch(() => {\r\n                console.log('Internal server error');\r\n            });;\r\n    };\r\n\r\n\r\n\r\n    const handleFormSubmit = (event)=>{\r\n        event.preventDefault();\r\n        setErrors(validation(values));\r\n        setDataIsCorrect(true);\r\n        const {lastname,firstname, email, password, major} = values\r\n        if(lastname && firstname && email && password && major){            \r\n            //alert(\"registered successfully\")\r\n            \r\n            axios.post(\"/api/save\", values)\r\n                .then(res => {\r\n                    console.log(res.data)\r\n                    alert(res.data.msg)\r\n                    if (res.data.msg !== \"User already registered\"){\r\n                        history.push('/sign-up')                \r\n                    }\r\n                })\r\n        \r\n        }\r\n        \r\n        else{\r\n            alert(\"invalid input\")\r\n        }\r\n    };\r\n\r\n    useEffect(() =>{\r\n        if (Object.keys(errors).length === 0 && dataIsCorrect){\r\n            // submitForm(true);\r\n        }\r\n\r\n    }, [errors]);\r\n\r\n    return (\r\n      <div className = \"sign_up_container\">\r\n          <div className = \"sign_up-wrapper\">\r\n            <div>\r\n            <h2 className = \"sign-up_title\">Welcome to KSEA Chapter!</h2>                \r\n                <h2 className = \"sign-up_title\">Create your new account</h2>                \r\n            </div>\r\n            <form className=\"form-wrapper\" onSubmit= {submit}>                \r\n                <div className = \"sign-up_name\">\r\n                    <label className =\"sign_up_label\">Last Name</label>\r\n                    <input className = \"sign_up_input\" type=\"text\" name=\"lastname\" value={values.lastname} onChange={handleChange}/>\r\n                    {errors.lastname && <p className=\"error\">{errors.lastname}</p>}\r\n                </div>\r\n                <div className = \"sign-up_name\">\r\n                    <label className =\"sign_up_label\">First Name</label>\r\n                    <input className = \"sign_up_input\" type=\"text\" name=\"firstname\" value={values.firstname} onChange={handleChange}/>\r\n                    {errors.firstname && <p className=\"error\">{errors.firstname}</p>}\r\n                </div>\r\n                <div className = \"sign-up_email\">\r\n                    <label className =\"sign_up_label\">Email</label>\r\n                    <input className = \"sign_up_input\" type=\"email\" name=\"email\" value={values.email} onChange={handleChange}/>\r\n                    {errors.email && <p className=\"error\">{errors.email}</p>}\r\n                </div>\r\n                <div className = \"sign-up_email\">\r\n                    <label className =\"sign_up_label\">Password</label>\r\n                    <input className = \"sign_up_input\" type=\"password\" name=\"password\" value={values.password} onChange={handleChange}/>\r\n                    {errors.password && <p className=\"error\">{errors.password}</p>}\r\n                </div>\r\n                <div className = \"sign-up_name\">\r\n                    <label className =\"sign_up_label\">Major</label>\r\n                    <input className = \"sign_up_input\" type=\"text\" name=\"major\" value={values.major} onChange={handleChange}/>\r\n                    {errors.major && <p className=\"error\">{errors.major}</p>}\r\n                </div>\r\n                <div>\r\n                    <button className =\"submit\" onClick={handleFormSubmit}>Sign up</button>                    \r\n                    {/* <button className =\"submit\">Submit</button> */}\r\n                </div>\r\n          </form>\r\n          </div>\r\n      </div>\r\n    );\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport default SignUpForm\r\n"]},"metadata":{},"sourceType":"module"}